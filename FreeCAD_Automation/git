#!/bin/bash
# ==============================================================================================
#                                       Script Overview
# ==============================================================================================
# Temporary git wrapper for GitCAD workflow. Only wraps over git.exe when user runs `source activate.sh` for that terminal session

# ==============================================================================================
#                              Verify and Retrieve Dependencies
# ==============================================================================================
if [ -z "$REAL_GIT" ]; then
    echo "Error: Could not find real git executable" >&2
    exit 1 # 1=$FAIL
fi

# ==============================================================================================
#                     Call Real `git.exe` With GIT_COMMAND Environment Variable
# ==============================================================================================
case $1 in
  "checkout")
    # ToDo: Add checkout refspec to env variable for post-checkout to use during file checkout
    GIT_COMMAND=$1 "$REAL_GIT" "$@"
    ;;
  "reset")
    GIT_COMMAND=$1 bash FreeCAD_Automation/git_aliases/git-reset-and-sync-FCStd-files.sh "$@"
    ;;
  "stash")
    GIT_COMMAND=$1 bash FreeCAD_Automation/git_aliases/git-stash-and-sync-FCStd-files.sh "$@"
    ;;
  *)
    GIT_COMMAND=$1 "$REAL_GIT" "$@"
    ;;
esac
exit 0 # 0=$SUCCESS